# Secret will be used to sign session cookies, CSRF tokens and for other encryption utilities.
secret = "<%= p("cerebro.secret") %>"

# Application base path
basePath = "/"

# Rest request history max size per user
rest.history.size = 50

# Path of local database file
data.path = "/var/vcap/store/cerebro/cerebro.db"

# Defaults to RUNNING_PID at the root directory of the app.
# To avoid creating a PID file set this value to /dev/null
pidfile.path = "/dev/null"

<%
  elasticsearch_host = "http://localhost:9200"
  if_p("cerebro.elasticsearch.host") do |host|
    elasticsearch_host = host
  end


  cluster_name = "default"
  if_link("elasticsearch") { |elasticsearch_link| cluster_name = elasticsearch_link.p("cerebro.elasticsearch.cluster_name") }
  if_p("cerebro.elasticsearch.cluster_name") do |cn|
    cluster_name = cn
  end

%>

hosts = [
  {
    host = "<%= elasticsearch_host %>"
    name = "<%= cluster_name %>"
  }
]

<% if_p('cerebro.user', 'cerebro.password') do %>
auth = {
  type: basic
  settings: {
    username = "<%= p('cerebro.user') %>"
    password = "<%= p('cerebro.password') %>"
  }
}
<% end %>
